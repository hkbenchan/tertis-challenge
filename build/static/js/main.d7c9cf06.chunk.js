(this["webpackJsonptertis-challenge"]=this["webpackJsonptertis-challenge"]||[]).push([[0],{46:function(e,n,t){e.exports=t(61)},57:function(e,n,t){},59:function(e,n,t){e.exports=t.p+"static/media/logo.25bf045c.svg"},60:function(e,n,t){},61:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(21),c=t.n(a),i=t(11),u=t(9),l=t(36),s=Object(l.composeWithDevTools)({}),p=[],f=function(e){return Object(u.createStore)(e,s(u.applyMiddleware.apply(void 0,p)))},d=t(37),m=1,g={LONG:"long",SQUARE:"square",LSHAPE_1:"l-shape-1",LSHAPE_2:"l-shape-2",TSHAPE:"t-shape"},v="N",h="E",y="S",b="W",w=t(45),k=t(4),E=(t(56),t(65)),O=t(62),B=t(71),P=t(41),D=t(70),_=t(63),j=t(68),S=t(40),x=t(67),A=t(64),C=t(69),T=t(44),L=function(e){switch(e.type){case g.LONG:return function(e){var n=e.direction,t=e.position;switch(n){case v:case y:return[[t[0],t[1]-1],[t[0],t[1]],[t[0],t[1]+1],[t[0],t[1]+2]];default:return[[t[0]-1,t[1]],[t[0],t[1]],[t[0]+1,t[1]],[t[0]+2,t[1]]]}}(e);case g.SQUARE:return function(e){var n=e.position;return[[n[0],n[1]],[n[0],n[1]+1],[n[0]+1,n[1]],[n[0]+1,n[1]+1]]}(e);case g.LSHAPE_1:return function(e){var n=e.direction,t=e.position;switch(n){case v:return[[t[0]-1,t[1]],[t[0],t[1]],[t[0],t[1]+1],[t[0],t[1]+2]];case h:return[[t[0],t[1]-1],[t[0],t[1]],[t[0]-1,t[1]],[t[0]-2,t[1]]];case y:return[[t[0]+1,t[1]],[t[0],t[1]],[t[0],t[1]-1],[t[0],t[1]-2]];case b:return[[t[0],t[1]+1],[t[0],t[1]],[t[0]+1,t[1]],[t[0]+2,t[1]]]}}(e);case g.LSHAPE_2:return function(e){var n=e.direction,t=e.position;switch(n){case v:return[[t[0]+1,t[1]],[t[0],t[1]],[t[0],t[1]+1],[t[0],t[1]+2]];case h:return[[t[0],t[1]+1],[t[0],t[1]],[t[0]-1,t[1]],[t[0]-2,t[1]]];case y:return[[t[0]-1,t[1]],[t[0],t[1]],[t[0],t[1]-1],[t[0],t[1]-2]];case b:return[[t[0],t[1]-1],[t[0],t[1]],[t[0]+1,t[1]],[t[0]+2,t[1]]]}}(e);case g.TSHAPE:return function(e){var n=e.direction,t=e.position;switch(n){case v:return[[t[0]-1,t[1]],[t[0],t[1]],[t[0]+1,t[1]],[t[0],t[1]+1]];case h:return[[t[0],t[1]-1],[t[0],t[1]],[t[0],t[1]+1],[t[0]-1,t[1]]];case y:return[[t[0]-1,t[1]],[t[0],t[1]],[t[0]+1,t[1]],[t[0],t[1]-1]];case b:return[[t[0],t[1]-1],[t[0],t[1]],[t[0],t[1]+1],[t[0]+1,t[1]]]}}(e);default:return[]}},R=function(e,n){var t=L(n);return!E.a(O.a(0),B.a,P.a((function(e){return e[0]<0||e[0]>=10||e[1]>=15})))(t)&&!E.a(O.a(0),B.a,P.a((function(n){return n[1]>=0&&1==e[n[1]][n[0]]})))(t)};function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(t,!0).forEach((function(n){Object(d.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var H,M,K="".concat("TERTIS","/ADVANCED_BOARD"),G="".concat("TERTIS","/MOVE_BLOCK_LEFT"),U="".concat("TERTIS","/MOVE_BLOCK_RIGHT"),W="".concat("TERTIS","/ROTATE_BLOCK"),z="".concat("TERTIS",".MOVE_BLOCK_DOWN"),V={direction:v},F=function(){var e,n=function(){var e=k.a(g),n=Math.floor(Math.random()*e.length);return g[e[n]]}();switch(n){case g.LONG:case g.LSHAPE_1:case g.LSHAPE_2:e=[5,-3];break;case g.SQUARE:case g.TSHAPE:e=[5,-2];break;default:e=[5,0]}return N({type:n,position:e},V)},Q={board:(H=10,M=15,w.a((function(){return Array(H).fill(0)}))(Array(M))),currentDroppingBlock:F(),isPlaying:!0,gamePoint:0},J=function(e,n){if(!e.isPlaying)return console.log("not playing"),e;var t=e.currentDroppingBlock.position,r=[t[0],t[1]+1],o=N({},e.currentDroppingBlock,{position:r});if(!R(e.board,o)){var a=F(),c=function(e,n){var t=L(n),r=E.a(O.a(0),B.a,P.a((function(e){return e[0]<0||e[0]>=10||e[1]>=15||e[1]<0})))(t);return{newBoard:D.a(w.a)((function(e,n){return D.a(w.a)((function(e,r){return _.a([r,n])(t)?1:e}))(e)}))(e),anyUnpaintPart:r}}(e.board,e.currentDroppingBlock),i=c.newBoard;if(c.anyUnpaintPart)return console.log("game over"),N({},e,{board:i,isPlaying:!1,currentDroppingBlock:a});var u=function(e){var n=E.a(B.a,P.a((function(e){return j.a(S.a(1))(e)})))(e);if(0===n)return{newBoard:e,pointReceived:n};var t=E.a(x.a(A.a((function(){return Array(10).fill(0)}),n)),C.a((function(e){return console.log(e)})),T.a((function(e){return j.a(S.a(1))(e)})))(e);return console.log(t),{newBoard:t,pointReceived:n}}(i),l=u.newBoard,s=u.pointReceived;return N({},e,{board:l,currentDroppingBlock:a,gamePoint:e.gamePoint+s})}return N({},e,{currentDroppingBlock:o})},X=function(e,n){var t=e.currentDroppingBlock.position,r=[n.type===G?t[0]-1:t[0]+1,t[1]],o=N({},e.currentDroppingBlock,{position:r});return R(e.board,o)?N({},e,{currentDroppingBlock:o}):e},q=function(e,n){var t;switch(e.currentDroppingBlock.direction){case v:t=h;break;case h:t=y;break;case y:t=b;break;case b:default:t=v}var r=N({},e.currentDroppingBlock,{direction:t});return R(e.board,r)?N({},e,{currentDroppingBlock:r}):e};var Y=function(e){return e.game.isPlaying},$=f(Object(u.combineReducers)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n.type){case K:case z:return J(e,n);case G:case U:return X(e,n);case W:return q(e,n);default:return e}}})),Z=(t(57),t(24)),ee=t(25),ne=t(27),te=t(26),re=t(28),oe=t(6),ae=t(66),ce=oe.a.div.withConfig({displayName:"row__Cell",componentId:"sc-1u83ono-0"})(["border:1px solid #333;width:5vh;height:5vh;"," ",""],(function(e){return 1==e.type&&"\n    background-color: blue;\n  "}),(function(e){return e.isDropping&&"\n    background-color: green;\n  "})),ie=oe.a.div.withConfig({displayName:"row__Container",componentId:"sc-1u83ono-1"})(["display:flex;flex-direction:row;justify-content:center;width:100%;"]),ue=function(e){var n=e.rowState,t=e.blockXPositions;return o.a.createElement(ie,null,D.a(w.a)((function(e,n){return o.a.createElement(ce,{key:n,type:e,isDropping:_.a(n,t)})}))(n))},le=oe.a.div.withConfig({displayName:"board__Grid",componentId:"z88x6l-0"})(["display:flex;flex-direction:column;"]),se=function(e){function n(){return Object(Z.a)(this,n),Object(ne.a)(this,Object(te.a)(n).apply(this,arguments))}return Object(re.a)(n,e),Object(ee.a)(n,[{key:"render",value:function(){var e=this.props,n=e.board,t=e.currentBlock,r=L(t);return o.a.createElement(le,null,D.a(w.a)((function(e,n){var t=E.a(w.a((function(e){return e[0]})),P.a((function(e){return e[1]==n})))(r);return o.a.createElement(ue,{rowState:e,key:n,blockXPositions:t})}))(n))}}]),n}(o.a.PureComponent),pe=ae.a({board:function(e){return e.game.board},currentBlock:function(e){return e.game.currentDroppingBlock}}),fe=Object(i.b)(pe)(se),de=function(e){function n(){var e,t;Object(Z.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=Object(ne.a)(this,(e=Object(te.a)(n)).call.apply(e,[this].concat(o)))).onKeydown=function(e){var n=t.props,r=n.isPlaying,o=n.moveBlockLeft,a=n.moveBlockRight,c=n.rotateBlock,i=n.moveBlockDown;if(r)switch(e.keyCode){case 37:o();break;case 38:c();break;case 39:a();break;case 40:i()}},t.update=function(){var e=t.props,n=e.advanceBoard;e.isPlaying&&(n(),setTimeout(t.update,1e3/m))},t}return Object(re.a)(n,e),Object(ee.a)(n,[{key:"componentDidMount",value:function(){setTimeout(this.update,1e3/m),document.addEventListener("keydown",this.onKeydown,!1)}},{key:"componentWillUnmount",value:function(){document.removeListener("keydown",this.onKeydown,!1)}},{key:"render",value:function(){return null}}]),n}(o.a.PureComponent),me=ae.a({isPlaying:Y}),ge={advanceBoard:function(){return{type:K}},moveBlockLeft:function(){return{type:G}},moveBlockRight:function(){return{type:U}},rotateBlock:function(){return{type:W}},moveBlockDown:function(){return{type:z}}},ve=Object(i.b)(me,ge)(de),he=oe.a.div.withConfig({displayName:"gameMessage__Container",componentId:"fmcmr1-0"})(["display:flex;width:calc(100% - 16px);flex-direction:row;margin-left:8px;margin-right:8px;"]),ye=oe.a.div.withConfig({displayName:"gameMessage__Controls",componentId:"fmcmr1-1"})(["display:flex;flex-direction:column;flex:1 0 20%;padding:8px;span{font-size:12pt;}"]),be=oe.a.div.withConfig({displayName:"gameMessage__Header",componentId:"fmcmr1-2"})(["font-size:24pt;font-weight:500;flex:1 0 50%;padding:8px;"]),we=oe.a.div.withConfig({displayName:"gameMessage__Score",componentId:"fmcmr1-3"})(["font-size:20pt;flex:1 0 20%;padding:8px;",""],(function(e){return e.isOver&&"\n    color: #FF9900;\n  "})),ke=ae.a({isPlaying:Y,score:function(e){return e.game.gamePoint}}),Ee=Object(i.b)(ke)((function(e){var n=e.score,t=e.isPlaying;return o.a.createElement(he,null,o.a.createElement(ye,null,o.a.createElement("span",null,"key up for rotate"),o.a.createElement("span",null,"key left/right for alignment"),o.a.createElement("span",null,"key down for accelerate")),o.a.createElement(be,null,"Tertis Challenge - Build this in 4 hours!"),t&&o.a.createElement(we,null,"Score: ".concat(n)),!t&&o.a.createElement(we,{isOver:!0},"Gameover! Your score: ".concat(n)))})),Oe=(t(59),t(60),function(){return o.a.createElement("div",{className:"App"},o.a.createElement(Ee,null),o.a.createElement(ve,null),o.a.createElement(fe,null),o.a.createElement("span",null,"Created by ",o.a.createElement("a",{href:"https://benchanhp.me"},"@hkbenchan")))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(i.a,{store:$},o.a.createElement(Oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[46,1,2]]]);
//# sourceMappingURL=main.d7c9cf06.chunk.js.map